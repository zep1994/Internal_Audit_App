<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>File Upload Example</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.5.1/min/dropzone.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
</head>
<form id="upload-widget" method="post" action="/public/uploads" class="dropzone" enctype="multipart/form-data">
    <div class="fallback">
        <input name="file" type="file" id="file" />
    </div>
</form>

<div class="files"></div>

<body>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.5.1/min/dropzone.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            Dropzone.options.uploadWidget = {
                url: '/public/uploads',
                paramName: 'file',
                acceptedFiles: "image/*,application/pdf,.doc,.docx,.xls,.xlsx,.csv,.tsv,.ppt,.pptx,.pages,.odt,.rtf",
                dictDefaultMessage: 'Drag File To Upload',
                addRemoveLinks: true,
                    init: function() {
                        let myDropzone = this;
                        myDropzone.on('success', function(file, message) {
                            var a = document.createElement('a');
                            a.setAttribute('href',"/public/uploads/" + file);
                            a.innerHTML = "<br>Download";
                            file.previewTemplate.appendChild(a);
                        })
                    }
                }
        })
    </script>
</body>
</html>


<!-- $(document).ready(function() {
    $.ajax({
        url: '/upload',
        method: 'post',
        data: { file: 'file'},
        success: function(data) {
            var a = document.createElement('a');
            a.setAttribute('href',"/uploads/" + data.file);
            a.innerHTML = "<br>download";
            file.previewTemplate.appendChild(a);
        }
    })
}) -->


<!-- 
$(".dropzone").on('change', function() {
    $.ajax({
        url: '/upload',
        method: 'post',
        dataType: 'json',
        data: { 'file': 'file' },
        success: function(response) {
            console.log(file)
        }
    })
}) -->

<!-- <script>
    let myDropzone = new Dropzone("div#myId", { url: "/target"});
    Dropzone.options.myGreatDropzone = { // camelized version of the `id`
        paramName: "file", // The name that will be used to transfer the file
        maxFilesize: 2, // MB
        accept: function(file, done) {
            if (file.name == "justinbieber.jpg") {
                done("Naha, you don't.");
            }
            else { done(); }
            }
        };
</script> -->


<!-- this.on('thumbnail', function(file) {
    if (file.accepted !== false) {
        if (file.width < 640 || file.height < 480) {
        file.rejectDimensions();
        } else {
        file.acceptDimensions();
        }
    }
    });
},
accept: function(file, done) {
    file.acceptDimensions = done;
    file.rejectDimensions = function() {
    done('The image must be at least 640 x 480px');
    }; -->